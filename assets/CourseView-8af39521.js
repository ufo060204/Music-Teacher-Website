import{a as p,m as v,b as N}from"./pinia-ef994b1a.js";import{u as $}from"./userStore-320d26af.js";import{c as w}from"./coursesStore-194bfa56.js";import{c as q}from"./cartStore-6b4bf0e4.js";import{L as F}from"./ListPlaceholder-6606d71c.js";import{S as W,a as H}from"./free-mode.min-5e8e3a80.js";import{_ as A}from"./default-user-photo-5f1f51b0.js";import{bf as y,aC as r,aq as a,n as l,v as c,ba as _,F as M,aA as O,au as L,ar as U,o as s,aa as g,bc as Q,u as h,aQ as i,l as j,m as f}from"./_plugin-vue_export-helper-ec969899.js";import{t as x}from"./teacherStore-d3aefec1.js";import{l as R,n as z}from"./runtime-dom.esm-bundler-e62d4d3a.js";import"./index.esm2017-51fd54f1.js";import"./index.browser.esm2017-34f98be0.js";import"./_commonjsHelpers-87174ba5.js";import"./update-swiper-3bad1b5e.js";const G={components:{Swiper:W,SwiperSlide:H},setup(){return{}},computed:{},methods:{},created(){}},J=e=>(L("data-v-0f5edc72"),e=e(),U(),e),K={class:"container"},X=J(()=>s("div",{class:"card rounded-3 shadow-sm"},[s("div",{class:"card-body"},[s("div",{class:"d-flex align-items-center"},[s("div",{class:"me-8"},[s("img",{src:A,alt:"預設用戶照片",class:"user-photo"})]),s("div",{class:""},[s("div",null,[s("span",{class:"fw-bold me-8"},"王小明"),s("span",null,"2023-08-09")]),s("div",{class:"text-warning"},[s("i",{class:"bi bi-star-fill me-4"}),s("i",{class:"bi bi-star-fill me-4"}),s("i",{class:"bi bi-star-fill me-4"}),s("i",{class:"bi bi-star-fill me-4"}),s("i",{class:"bi bi-star-fill me-4"})])])]),s("div",null,[s("p",{class:"fw-bold my-2"},"推薦給所有想學音樂的同學"),s("p",null," 這個音樂家教課程真是太棒了！老師不僅專業且充滿耐心，每次上課都讓我深刻理解音樂的精髓。透過個人指導，我不僅學會了演奏技巧，還能自信地創作自己的音樂作品。感謝老師用心的教學，讓我愛上了音樂，這是一段美妙的學習旅程！ ")])])],-1));function Y(e,o,C,D,V,I){const u=r("SwiperSlide"),t=r("swiper");return a(),l("div",K,[c(t,{loop:!0,slidesPerView:1,spaceBetween:20,freeMode:!0,pagination:{clickable:!0},navigation:"",breakpoints:{576:{slidesPerView:1,spaceBetween:26},768:{slidesPerView:2,spaceBetween:26},992:{slidesPerView:2,spaceBetween:26},1400:{slidesPerView:3,spaceBetween:26}},class:"mySwiper px-24"},{default:_(()=>[(a(),l(M,null,O(5,b=>c(u,{key:b,class:"mb-32"},{default:_(()=>[X]),_:2},1024)),64))]),_:1})])}const Z=y(G,[["render",Y],["__scopeId","data-v-0f5edc72"]]),ss={methods:{...p(x,["updateImg","beforeUpdate","imgHandle"]),...p(w,["updateCourseData"])},computed:{...v(x,["teacherData.courseImg"]),...N(x,["teacherData"]),...N(w,["courseDetails"])}},es={id:"EditCourseModal",ref:"EditCourseModal",class:"modal fade",tabindex:"-1","aria-labelledby":"EditCourseModalLabel","aria-hidden":"true"},ts={class:"modal-dialog"},os={class:"modal-content border-0"},as=s("div",{class:"modal-header bg-dark text-white"},[s("h4",null,"編輯課程資料")],-1),ls={class:"modal-body"},is={class:"row mb-4"},ds=s("div",{class:"col-auto"},[s("label",{for:"name",class:"col-form-label px-4"},[s("span",{class:"text-danger"},"*"),h("課程名稱")])],-1),cs={class:"col-8 col-lg-6"},ns={class:"row mb-4"},rs=s("div",{class:"col-auto"},[s("label",{for:"price",class:"col-form-label px-4"},[s("span",{class:"text-danger"},"*"),h("課程費用")])],-1),us={class:"col-8 col-lg-6"},ms={class:"row mb-4"},_s=s("div",{class:"col-auto"},[s("label",{for:"type",class:"col-form-label px-4"},[s("span",{class:"text-danger"},"*"),h("教學項目")])],-1),ps={class:"col-8 col-lg-6"},hs=s("option",{value:"",selected:"",disabled:""},"請選擇教學項目",-1),bs=s("option",{value:"電吉他"},"電吉他",-1),fs=s("option",{value:"電貝斯"},"電貝斯",-1),gs=s("option",{value:"爵士鼓"},"爵士鼓",-1),vs={class:"row mb-4"},ws=s("div",{class:"col-auto"},[s("label",{for:"time",class:"col-form-label px-4"},[s("span",{class:"text-danger"},"*"),h("授課時間")])],-1),$s={class:"col-8 col-lg-6"},ys={class:"mb-3"},ks=s("label",{for:"intro",class:"form-label"},"課程介紹",-1),Cs={class:"row"},Ds=s("div",{class:"col-6"},[s("label",{for:"courseImg",class:"form-label",accept:"image/png ,image/jpg"},"上傳一張課程封面照")],-1),Vs={class:"col-6"},Is={class:"text-center mb-16"},Ss=["src"],xs=["src"],Ms=s("div",{class:"text-end"},[s("button",{type:"button",class:"btn btn-outline-secondary rounded-4 me-4","data-bs-dismiss":"modal"}," 取消 "),s("button",{type:"submit",class:"btn btn-primary rounded-4","data-bs-dismiss":"modal"}," 確認 ")],-1),Ls=s("div",{class:"modal-footer"},null,-1);function Us(e,o,C,D,V,I){const u=r("v-field"),t=r("error-message"),b=r("v-form");return a(),l("div",es,[s("div",ts,[s("div",os,[as,s("div",ls,[c(b,{ref:"form",class:"border border-text-dark p-6 fw-bold",onSubmit:o[6]||(o[6]=m=>e.updateCourseData(e.courseDetails.data.courseId))},{default:_(({errors:m})=>[s("div",is,[ds,s("div",cs,[c(u,{id:"name",name:"課程名稱",type:"text",class:g(["form-control",{"is-invalid":m.課程名稱}]),placeholder:"請輸入課程名稱",rules:"required|min:3|max:20",modelValue:e.courseDetails.data.name,"onUpdate:modelValue":o[0]||(o[0]=n=>e.courseDetails.data.name=n)},null,8,["class","modelValue"]),c(t,{name:"課程名稱",class:"invalid-feedback"})])]),s("div",ns,[rs,s("div",us,[c(u,{id:"price",name:"課程費用",type:"number",class:g(["form-control",{"is-invalid":m.課程費用}]),placeholder:"請輸入課程費用",rules:"required|min_value:100|max_value:100000",modelValue:e.courseDetails.data.price,"onUpdate:modelValue":o[1]||(o[1]=n=>e.courseDetails.data.price=n)},null,8,["class","modelValue"]),c(t,{name:"課程費用",class:"invalid-feedback"})])]),s("div",ms,[_s,s("div",ps,[c(u,{id:"type",name:"教學項目",as:"select",class:g(["form-select",{"is-invalid":m.教學項目}]),rules:"required",modelValue:e.courseDetails.data.type,"onUpdate:modelValue":o[2]||(o[2]=n=>e.courseDetails.data.type=n)},{default:_(()=>[hs,bs,fs,gs]),_:2},1032,["class","modelValue"]),c(t,{name:"教學項目",class:"invalid-feedback"})])]),s("div",vs,[ws,s("div",$s,[c(u,{id:"time",name:"授課時間",type:"number",class:g(["form-control",{"is-invalid":m.授課時間}]),placeholder:"請輸入授課時間(分)",rules:"required|min_value:30|max_value:600",modelValue:e.courseDetails.data.time,"onUpdate:modelValue":o[3]||(o[3]=n=>e.courseDetails.data.time=n)},null,8,["class","modelValue"]),c(t,{name:"授課時間",class:"invalid-feedback"})])]),s("div",ys,[ks,Q(s("textarea",{id:"intro",class:g(["form-control",{"is-invalid":m.課程介紹}]),placeholder:"請輸入課程介紹，限定300字",rules:"required|max:300",cols:"30",rows:"10","onUpdate:modelValue":o[4]||(o[4]=n=>e.courseDetails.data.courseIntro=n)},`<error-message\r
              name="課程介紹"\r
              class="invalid-feedback"\r
            ></error-message>\r
            `,2),[[R,e.courseDetails.data.courseIntro]])]),s("div",Cs,[Ds,s("div",Vs,[s("input",{class:"form-control",type:"file",id:"courseImg",onChange:o[5]||(o[5]=n=>e.updateImg("course",n))},null,32)])]),s("div",Is,[e.teacherData.courseImg!==""?(a(),l("img",{key:0,class:"img-fluid",src:e.teacherData.courseImg,alt:"課程照片"},null,8,Ss)):(a(),l("img",{key:1,class:"img-fluid",src:e.courseDetails.data.courseImg,alt:"課程照片"},null,8,xs))]),Ms]),_:1},512)]),Ls])])],512)}const Bs=y(ss,[["render",Us]]);const Ps={data(){return{}},components:{},computed:{...v(w,["suggestCourses"]),...v($,["collectionStatus"])},methods:{...p(w,["getSuggestCourses"]),...p($,["toggleCollection"])},created(){}},k=e=>(L("data-v-06a4398a"),e=e(),U(),e),Ts={class:"row mb-32"},Es={class:"col-12 col-lg-8"},Ns=k(()=>s("p",{class:"fs-4 mb-16 fw-bold"},"猜你喜歡",-1)),qs={class:"row row-cols-1 row-cols-lg-3 overflow-auto"},js={class:"card course-card rounded-4 shadow h-100"},As={class:"position-relative overflow-hidden rounded-top-4"},Os=["src"],zs={key:1,class:"h-180px w-100 transition",src:"https://www.ils.com.tw/zh/Up_files/webskin/RWD/include/images/type3album_blank.png",alt:"課程預設圖片"},Fs=["onClick"],Ws={class:"card-body d-flex flex-column"},Hs={class:"fs-5 fw-bold d-flex mb-4"},Qs={class:"fs-6 text-secondary mb-20"},Rs={class:"d-flex text-secondary mb-auto"},Gs={class:"d-flex align-items-center me-8 position-relative course-card-title"},Js=k(()=>s("span",{class:"material-symbols-outlined fs-6 me-4 lh-24"}," timer ",-1)),Ks={class:"d-flex align-items-center me-8"},Xs=k(()=>s("span",{class:"material-symbols-outlined fs-6 me-4 lh-24"}," map ",-1)),Ys={class:"d-flex align-items-center me-8"},Zs=k(()=>s("span",{class:"material-symbols-outlined fs-6 me-4 lh-24"}," group ",-1)),se={key:0},ee={key:1},te={class:"fs-5 fw-bold"};function oe(e,o,C,D,V,I){const u=r("router-link");return a(),l("div",Ts,[s("div",Es,[Ns,s("div",qs,[(a(!0),l(M,null,O(this.suggestCourses,t=>(a(),l("div",{key:t.data.courseId,class:"col"},[c(u,{to:`/course/${t.data.courseId}`},{default:_(()=>[s("div",js,[s("div",As,[t.data.courseImg?(a(),l("img",{key:0,class:"h-180px w-100 transition",src:t.data.courseImg,alt:"課程圖片"},null,8,Os)):(a(),l("img",zs)),s("span",{onClick:z(b=>e.toggleCollection(t.data.courseId),["prevent"]),class:g(["material-icons-outlined position-absolute bottom-0 end-0 text-primary bookmark-icon",{"h-auto":this.collectionStatus(t.data.courseId)==="bookmark","h-0":this.collectionStatus(t.data.courseId)==="bookmark_border"}]),title:"加入 / 移除收藏"},i(this.collectionStatus(t.data.courseId)),11,Fs)]),s("div",Ws,[s("h2",Hs,i(t.data.name),1),s("h3",Qs,"by "+i(t.data.teacherName),1),s("ul",Rs,[s("li",Gs,[Js,s("p",null,i(t.data.time)+" 分鐘",1)]),s("li",Ks,[Xs,s("p",null,i(t.data.location),1)]),s("li",Ys,[Zs,t.data.buyer.length===0?(a(),l("span",se,"0")):(a(),l("span",ee,i(t.data.buyer.length),1))])]),s("span",te,"NT "+i(t.data.price),1)])])]),_:2},1032,["to"])]))),128))])])])}const ae=y(Ps,[["render",oe],["__scopeId","data-v-06a4398a"]]);const le={data(){return{}},components:{EditCourseModal:Bs,ListPlaceholder:F,CommentSwiper:Z,SuggestCourseSwiper:ae},methods:{...p(q,["addToCart","getUid"]),...p(w,["getCourseDetails","getSuggestCourses"]),...p($,["checkMemberObserver","addToCollection","toggleCollection","checkMemberObserver"])},computed:{...v(w,["courseDetails","courseViewDetails","AllCourseData","isLoading","suggestCourses"]),...v(q,["uid","cart"]),...v($,["uid","collectionStatus","isMember"])},watch:{"$route.params.id":{handler(e){this.courseId=e,this.courseId&&this.getCourseDetails(this.courseId)}}},created(){this.checkMemberObserver(),this.courseId=this.$route.params.id,console.log("這是 courseId",this.courseId),this.getCourseDetails(this.courseId),this.getSuggestCourses()}},d=e=>(L("data-v-cf8abe12"),e=e(),U(),e),ie={key:1,class:"mt-66"},de={class:"container py-32"},ce={class:"d-flex align-items-end"},ne={"aria-label":"breadcrumb"},re={class:"breadcrumb"},ue={class:"breadcrumb-item"},me={class:"breadcrumb-item"},_e=d(()=>s("li",{class:"breadcrumb-item active","aria-current":"page"},"單一課程",-1)),pe={class:"row mb-16 mb-lg-32"},he={class:"col-12 col-lg-8 mb-32 mb-lg-0"},be={class:"pe-xl-48"},fe=["src"],ge={class:"col-12 col-lg-4 d-flex flex-column"},ve={class:"fs-2 fw-bold"},we={class:"mt-16 text-grey-bold"},$e={class:"material-icons-outlined"},ye=d(()=>s("span",null,"收藏",-1)),ke={class:"row align-items-start"},Ce={class:"col-12 col-lg-8"},De={class:"row align-items-center mb-16"},Ve={class:"col-auto cursor-pointer"},Ie=["src"],Se={key:1,class:"h-100px w-100px rounded-circle object-fit-cover",src:A,alt:"老師照片"},xe={class:"col-auto fs-2"},Me={class:"row mb-32"},Le={class:"col-12 col-lg-10"},Ue=d(()=>s("p",{class:"fs-4 mb-16 fw-bold"},"關於課程",-1)),Be={class:"row mb-16 g-16"},Pe={class:"col-auto"},Te={class:"d-flex align-items-center"},Ee=d(()=>s("span",{class:"material-symbols-outlined fs-1 me-8"},"timer",-1)),Ne=d(()=>s("p",{class:"text-grey-bold fs-7"},"課程時長",-1)),qe={class:"fs-6 fw-bold"},je={class:"col-auto"},Ae={class:"d-flex align-items-center"},Oe=d(()=>s("span",{class:"material-symbols-outlined fs-1 me-8"},"group",-1)),ze=d(()=>s("p",{class:"text-grey-bold fs-7"},"被購買數",-1)),Fe={class:"fs-6 fw-bold"},We={class:"col-auto"},He={class:"d-flex align-items-center"},Qe=d(()=>s("span",{class:"material-symbols-outlined fs-1 me-8"},"map",-1)),Re=d(()=>s("p",{class:"text-grey-bold fs-7"},"上課地點",-1)),Ge={class:"fs-6 fw-bold"},Je={class:"col-12 col-xl-auto"},Ke={class:"d-flex align-items-center"},Xe=d(()=>s("span",{class:"material-symbols-outlined fs-1 me-8"},"school",-1)),Ye=d(()=>s("p",{class:"text-grey-bold fs-7"},"上課方式",-1)),Ze={class:"fs-6 bg-primary rounded px-2 fw-bold me-8"},st={key:0,class:"col-12 col-lg-4 position-sticky top-100px"},et={class:"p-32 border rounded-4"},tt=d(()=>s("h4",{class:"border-bottom pb-24 mb-24"},"購買單堂課程",-1)),ot={class:"mb-16"},at=d(()=>s("span",{class:"fs-5 me-16"},"售價",-1)),lt={class:"fs-1"},it={class:"d-flex justify-content-between"},dt=d(()=>s("span",{class:"material-symbols-outlined fs-3 align-middle"},"shopping_cart",-1)),ct=[dt],nt={key:1,class:"col-12 col-lg-4 p-32 position-sticky top-100px border rounded-4"},rt=d(()=>s("h4",{class:"border-bottom pb-24 mb-24"},"購買人數",-1)),ut={class:"mb-16"},mt=d(()=>s("span",{class:"fs-5 me-4"},"共 ",-1)),_t={class:"fs-1"},pt=d(()=>s("div",{class:"d-flex justify-content-between align-items-center"},[s("button",{type:"button",class:"btn btn-outline-primary w-25 rounded-pill","data-bs-toggle":"modal","data-bs-target":"#EditCourseModal"}," 編輯 "),s("span",{class:"text-primary fs-8"},"(課程審核通過後將無法再編輯)")],-1)),ht={class:"row mb-32 mt-32 mt-lg-0"},bt={class:"col-12 col-lg-8"},ft=d(()=>s("p",{class:"fs-4 mb-16 fw-bold"},"課程評價",-1));function gt(e,o,C,D,V,I){var B,P,T,E;const u=r("ListPlaceholder"),t=r("router-link"),b=r("CommentSwiper"),m=r("SuggestCourseSwiper"),n=r("EditCourseModal");return a(),l(M,null,[e.isLoading?(a(),j(u,{key:0,class:"mt-66 py-32"})):f("",!0),e.isLoading?f("",!0):(a(),l("div",ie,[s("section",null,[s("div",de,[s("div",ce,[s("nav",ne,[s("ol",re,[s("li",ue,[c(t,{to:"/"},{default:_(()=>[h("首頁")]),_:1})]),s("li",me,[c(t,{to:"/courses"},{default:_(()=>[h("所有課程")]),_:1})]),_e])])]),s("div",pe,[s("div",he,[s("div",be,[s("img",{class:"h-lg-500 w-100 rounded-4",src:(B=e.courseViewDetails.data)==null?void 0:B.courseImg,alt:"課程圖片"},null,8,fe)])]),s("div",ge,[s("h1",ve,i(e.courseViewDetails.data.name),1),s("p",we,i(e.courseViewDetails.data.courseIntro),1),s("button",{type:"button",onClick:o[0]||(o[0]=z(S=>e.toggleCollection(e.courseViewDetails.data.courseId),["prevent"])),class:"btn btn-outline-primary px-16 py-8 mt-auto ms-auto rounded-pill d-flex align-items-center",title:"加入 / 移除收藏"},[s("span",$e,i(this.collectionStatus(e.courseViewDetails.data.courseId)),1),ye])])]),s("div",ke,[s("div",Ce,[s("div",De,[s("div",Ve,[e.courseViewDetails.teacherImg?(a(),l("img",{key:0,class:"h-100px w-100px rounded-circle object-fit-cover",src:e.courseViewDetails.teacherImg,alt:"老師照片"},null,8,Ie)):(a(),l("img",Se))]),s("div",xe,i(e.courseViewDetails.teacherName),1)]),s("div",Me,[s("div",Le,i(e.courseViewDetails.teacherIntro),1)]),Ue,s("div",Be,[s("div",Pe,[s("div",Te,[Ee,s("div",null,[Ne,s("p",qe,i(e.courseViewDetails.data.time)+"分鐘",1)])])]),s("div",je,[s("div",Ae,[Oe,s("div",null,[ze,s("p",Fe,i((P=e.courseViewDetails.data.buyer)==null?void 0:P.length)+"次",1)])])]),s("div",We,[s("div",He,[Qe,s("div",null,[Re,s("p",Ge,i(e.courseViewDetails.data.location),1)])])]),s("div",Je,[s("div",Ke,[Xe,s("div",null,[Ye,s("p",Ze,i((T=e.courseViewDetails.data.classMode)==null?void 0:T[0]),1)])])])])]),e.courseViewDetails.teacherUid!==e.uid?(a(),l("div",st,[s("div",et,[tt,s("div",ot,[at,s("span",lt,"NT$ "+i(e.courseViewDetails.data.price),1)]),s("div",it,[e.isMember?(a(),j(t,{key:0,to:"/cart",onClick:o[1]||(o[1]=S=>e.addToCart(e.courseViewDetails.data.courseId)),type:"button",class:"btn btn-outline-primary w-75 rounded-pill"},{default:_(()=>[h("立即購買")]),_:1})):f("",!0),e.isMember?f("",!0):(a(),l("button",{key:1,onClick:o[2]||(o[2]=S=>e.addToCart(e.courseViewDetails.data.courseId)),type:"button",class:"btn btn-outline-primary w-75 rounded-pill"},"立即購買")),s("button",{onClick:o[3]||(o[3]=S=>e.addToCart(e.courseViewDetails.data.courseId)),type:"button",class:"btn btn btn-primary rounded-pill"},ct)])])])):f("",!0),e.courseViewDetails.teacherUid===e.uid?(a(),l("div",nt,[rt,s("div",ut,[mt,s("span",_t,i((E=e.courseViewDetails.data.buyer)==null?void 0:E.length)+" 人",1)]),pt])):f("",!0)]),s("div",ht,[s("div",bt,[ft,c(b)])]),c(m)])])])),c(n)],64)}const Bt=y(le,[["render",gt],["__scopeId","data-v-cf8abe12"]]);export{Bt as default};
