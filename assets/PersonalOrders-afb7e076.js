import{d as L,a as k,m as v}from"./pinia-ef994b1a.js";import{g as C,d as S,e as g,h as $,n as P,q as V,w as q}from"./index.browser.esm2017-73d59744.js";import{u as B}from"./userStore-c2a6c953.js";import{L as N}from"./ListPlaceholder-6606d71c.js";import{bf as T,aC as Y,n as o,o as s,l as F,m as i,F as f,aA as D,aq as t,aQ as d}from"./_plugin-vue_export-helper-ec969899.js";import"./index.esm2017-86ab7814.js";import"./_commonjsHelpers-87174ba5.js";const y=C(),w=B(),O=L("orderStore",{state:()=>({myOrders:[],existingOrders:[],isLoading:!0}),actions:{async getOrders(){this.isLoading=!0,await w.checkMemberObserver();const a=S(y,"users",w.uid),l=await g(a);if(l.exists()){const u=l.data().myOrders;console.log("使用者的 userOrdersData 內容",u);const m=$(y,"orders"),h=await P(V(m,q("orderId","in",u))),n=[];h.forEach(r=>{const c=r.data();n.push(c)}),console.log("存在於 userOrdersData 中的訂單(尚未有課程細節)",n);const e=[];for(const r of n){const c={...r},p=[];await Promise.all(r.orderDetail.map(async x=>{const _=await g(x);_.exists()&&p.push(_.data())})),c.courseDetails=p,e.push(c)}this.myOrders=e,console.log("我的訂單結果",this.myOrders),this.isLoading=!1}else console.log("找不到該用戶的文檔")}},getOrderCourseDetails(){},getters:{}}),I={data(){return{}},components:{ListPlaceholderVue:N},methods:{...k(O,["getOrders"])},computed:{...v(O,["myOrders","isLoading"])},watch:{},created(){this.getOrders()}},A={class:"pt-66"},E={class:"container"},M={key:1,class:"card rounded-4 shadow-sm my-32"},R={class:"card-body"},W={class:"table-responsive"},Q={class:"table table-hover"},j=s("thead",{class:"border-bottom-3 fw-bold"},[s("tr",{class:"align-middle"},[s("th",{class:"text-nowrap"},"購買時間"),s("th",{class:"text-nowrap"},"購買品項"),s("th",{class:"text-nowrap"},"購買金額")])],-1),z={class:"text-nowrap"},G={class:"text-nowrap"},H={key:0,class:"text-nowrap"},J={key:1,class:"text-nowrap"};function K(a,l,b,u,m,h){const n=Y("ListPlaceholderVue");return t(),o("div",A,[s("div",E,[a.isLoading?(t(),F(n,{key:0})):i("",!0),a.isLoading?i("",!0):(t(),o("div",M,[s("div",R,[s("div",W,[s("table",Q,[j,s("tbody",null,[(t(!0),o(f,null,D(a.myOrders,e=>(t(),o("tr",{key:e.orderId},[s("td",z,d(this.$moment(e.createdTime).format("YYYY年M月D日")),1),s("td",G,[s("ul",null,[(t(!0),o(f,null,D(e.courseDetails,r=>(t(),o("li",{key:r.courseId},d(r.name),1))),128))])]),e.useCoupon?(t(),o("td",H,"NT$ "+d(e.couponTotal),1)):i("",!0),e.useCoupon?i("",!0):(t(),o("td",J,"NT$ "+d(e.total),1))]))),128))])])])])]))])])}const rs=T(I,[["render",K]]);export{rs as default};
