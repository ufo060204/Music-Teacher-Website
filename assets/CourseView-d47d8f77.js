import{a as b,m as v,b as j}from"./pinia-ef994b1a.js";import{u as y}from"./userStore-c0c23e47.js";import{c as w}from"./coursesStore-90f27488.js";import{c as E}from"./cartStore-52028dfd.js";import{L as H}from"./ListPlaceholder-6606d71c.js";import{S as N,a as q}from"./free-mode.min-5e8e3a80.js";import{_ as A}from"./default-user-photo-5f1f51b0.js";import{bf as k,aC as r,aq as a,l as $,ba as _,n as c,aA as O,v as d,F as M,o as s,aa as g,bc as Q,u as h,aQ as i,au as z,ar as F,m as f}from"./_plugin-vue_export-helper-ec969899.js";import{t as x}from"./teacherStore-85010782.js";import{l as R,n as W}from"./runtime-dom.esm-bundler-e62d4d3a.js";import"./index.esm2017-4c94104a.js";import"./index.browser.esm2017-40166462.js";import"./_commonjsHelpers-87174ba5.js";import"./update-swiper-3bad1b5e.js";const G={components:{Swiper:N,SwiperSlide:q},setup(){return{}},computed:{},methods:{},created(){}},J=s("div",{class:"card rounded-3 shadow-sm"},[s("div",{class:"card-body"},[s("div",{class:"d-flex align-items-center"},[s("div",{class:"me-8"},[s("img",{src:A,alt:"預設用戶照片",class:"w-40px h-40px rounded-circle object-fit-cover"})]),s("div",{class:""},[s("div",null,[s("span",{class:"fw-bold me-8"},"王小明"),s("span",null,"2023-08-09")]),s("div",{class:"text-warning"},[s("i",{class:"bi bi-star-fill me-4"}),s("i",{class:"bi bi-star-fill me-4"}),s("i",{class:"bi bi-star-fill me-4"}),s("i",{class:"bi bi-star-fill me-4"}),s("i",{class:"bi bi-star-fill me-4"})])])]),s("div",null,[s("p",{class:"fw-bold my-2"},"推薦給所有想學音樂的同學"),s("p",null," 這個音樂家教課程真是太棒了！老師不僅專業且充滿耐心，每次上課都讓我深刻理解音樂的精髓。透過個人指導，我不僅學會了演奏技巧，還能自信地創作自己的音樂作品。感謝老師用心的教學，讓我愛上了音樂，這是一段美妙的學習旅程！ ")])])],-1);function K(e,t,V,C,D,S){const m=r("SwiperSlide"),u=r("swiper");return a(),$(u,{loop:!0,slidesPerView:1,spaceBetween:24,freeMode:!0,pagination:{clickable:!0},breakpoints:{576:{slidesPerView:1,spaceBetween:24},768:{slidesPerView:2,spaceBetween:24},992:{slidesPerView:2,spaceBetween:24},1400:{slidesPerView:3,spaceBetween:24}},class:"mySwiper"},{default:_(()=>[(a(),c(M,null,O(5,p=>d(m,{key:p,class:"mb-32"},{default:_(()=>[J]),_:2},1024)),64))]),_:1})}const X=k(G,[["render",K]]),Y={methods:{...b(x,["updateImg","beforeUpdate","imgHandle"]),...b(w,["updateCourseData"])},computed:{...v(x,["teacherData.courseImg"]),...j(x,["teacherData"]),...j(w,["courseDetails"])}},Z={id:"EditCourseModal",ref:"EditCourseModal",class:"modal fade",tabindex:"-1","aria-labelledby":"EditCourseModalLabel","aria-hidden":"true"},ss={class:"modal-dialog"},es={class:"modal-content border-0"},ts=s("div",{class:"modal-header bg-dark text-white"},[s("h4",null,"編輯課程資料")],-1),os={class:"modal-body"},as={class:"row mb-4"},ls=s("div",{class:"col-auto"},[s("label",{for:"name",class:"col-form-label px-4"},[s("span",{class:"text-danger"},"*"),h("課程名稱")])],-1),is={class:"col-8 col-lg-6"},ds={class:"row mb-4"},cs=s("div",{class:"col-auto"},[s("label",{for:"price",class:"col-form-label px-4"},[s("span",{class:"text-danger"},"*"),h("課程費用")])],-1),ns={class:"col-8 col-lg-6"},rs={class:"row mb-4"},us=s("div",{class:"col-auto"},[s("label",{for:"type",class:"col-form-label px-4"},[s("span",{class:"text-danger"},"*"),h("教學項目")])],-1),ms={class:"col-8 col-lg-6"},_s=s("option",{value:"",selected:"",disabled:""},"請選擇教學項目",-1),ps=s("option",{value:"電吉他"},"電吉他",-1),bs=s("option",{value:"電貝斯"},"電貝斯",-1),hs=s("option",{value:"爵士鼓"},"爵士鼓",-1),fs={class:"row mb-4"},gs=s("div",{class:"col-auto"},[s("label",{for:"time",class:"col-form-label px-4"},[s("span",{class:"text-danger"},"*"),h("授課時間")])],-1),vs={class:"col-8 col-lg-6"},ws={class:"mb-3"},$s=s("label",{for:"intro",class:"form-label"},"課程介紹",-1),ys={class:"row"},ks=s("div",{class:"col-6"},[s("label",{for:"courseImg",class:"form-label",accept:"image/png ,image/jpg"},"上傳一張課程封面照")],-1),Vs={class:"col-6"},Cs={class:"text-center mb-16"},Ds=["src"],Ss=["src"],Is=s("div",{class:"text-end"},[s("button",{type:"button",class:"btn btn-outline-secondary rounded-4 me-4","data-bs-dismiss":"modal"}," 取消 "),s("button",{type:"submit",class:"btn btn-primary rounded-4","data-bs-dismiss":"modal"}," 確認 ")],-1),xs=s("div",{class:"modal-footer"},null,-1);function Ms(e,t,V,C,D,S){const m=r("v-field"),u=r("error-message"),p=r("v-form");return a(),c("div",Z,[s("div",ss,[s("div",es,[ts,s("div",os,[d(p,{ref:"form",class:"border border-text-dark p-6 fw-bold",onSubmit:t[6]||(t[6]=o=>e.updateCourseData(e.courseDetails.data.courseId))},{default:_(({errors:o})=>[s("div",as,[ls,s("div",is,[d(m,{id:"name",name:"課程名稱",type:"text",class:g(["form-control",{"is-invalid":o.課程名稱}]),placeholder:"請輸入課程名稱",rules:"required|min:3|max:20",modelValue:e.courseDetails.data.name,"onUpdate:modelValue":t[0]||(t[0]=n=>e.courseDetails.data.name=n)},null,8,["class","modelValue"]),d(u,{name:"課程名稱",class:"invalid-feedback"})])]),s("div",ds,[cs,s("div",ns,[d(m,{id:"price",name:"課程費用",type:"number",class:g(["form-control",{"is-invalid":o.課程費用}]),placeholder:"請輸入課程費用",rules:"required|min_value:100|max_value:100000",modelValue:e.courseDetails.data.price,"onUpdate:modelValue":t[1]||(t[1]=n=>e.courseDetails.data.price=n)},null,8,["class","modelValue"]),d(u,{name:"課程費用",class:"invalid-feedback"})])]),s("div",rs,[us,s("div",ms,[d(m,{id:"type",name:"教學項目",as:"select",class:g(["form-select",{"is-invalid":o.教學項目}]),rules:"required",modelValue:e.courseDetails.data.type,"onUpdate:modelValue":t[2]||(t[2]=n=>e.courseDetails.data.type=n)},{default:_(()=>[_s,ps,bs,hs]),_:2},1032,["class","modelValue"]),d(u,{name:"教學項目",class:"invalid-feedback"})])]),s("div",fs,[gs,s("div",vs,[d(m,{id:"time",name:"授課時間",type:"number",class:g(["form-control",{"is-invalid":o.授課時間}]),placeholder:"請輸入授課時間(分)",rules:"required|min_value:30|max_value:600",modelValue:e.courseDetails.data.time,"onUpdate:modelValue":t[3]||(t[3]=n=>e.courseDetails.data.time=n)},null,8,["class","modelValue"]),d(u,{name:"授課時間",class:"invalid-feedback"})])]),s("div",ws,[$s,Q(s("textarea",{id:"intro",class:g(["form-control",{"is-invalid":o.課程介紹}]),placeholder:"請輸入課程介紹，限定300字",rules:"required|max:300",cols:"30",rows:"10","onUpdate:modelValue":t[4]||(t[4]=n=>e.courseDetails.data.courseIntro=n)},`<error-message\r
              name="課程介紹"\r
              class="invalid-feedback"\r
            ></error-message>\r
            `,2),[[R,e.courseDetails.data.courseIntro]])]),s("div",ys,[ks,s("div",Vs,[s("input",{class:"form-control",type:"file",id:"courseImg",onChange:t[5]||(t[5]=n=>e.updateImg("course",n))},null,32)])]),s("div",Cs,[e.teacherData.courseImg!==""?(a(),c("img",{key:0,class:"img-fluid",src:e.teacherData.courseImg,alt:"課程照片"},null,8,Ds)):(a(),c("img",{key:1,class:"img-fluid",src:e.courseDetails.data.courseImg,alt:"課程照片"},null,8,Ss))]),Is]),_:1},512)]),xs])])],512)}const Bs=k(Y,[["render",Ms]]);const Ps={data(){return{}},components:{Swiper:N,SwiperSlide:q},computed:{...v(w,["suggestCourses"]),...v(y,["collectionStatus"])},methods:{...b(w,["getSuggestCourses"]),...b(y,["toggleCollection"])},created(){}},B=e=>(z("data-v-e35414c0"),e=e(),F(),e),Ls={class:"card course-card rounded-4 shadow h-380px"},Us={class:"position-relative overflow-hidden rounded-top-4"},Ts=["src"],js={key:1,class:"h-180px w-100 transition object-fit-cover",src:"https://www.ils.com.tw/zh/Up_files/webskin/RWD/include/images/type3album_blank.png",alt:"課程預設圖片"},Es=["onClick"],Ns={class:"card-body d-flex flex-column"},qs={class:"fs-5 fw-bold d-flex mb-4"},As={class:"fs-6 text-secondary mb-20"},Os={class:"d-flex text-secondary mb-auto"},zs={class:"d-flex align-items-center me-8 position-relative course-card-title"},Fs=B(()=>s("span",{class:"material-symbols-outlined fs-6 me-4 lh-24"}," timer ",-1)),Ws={class:"d-flex align-items-center me-8"},Hs=B(()=>s("span",{class:"material-symbols-outlined fs-6 me-4 lh-24"}," map ",-1)),Qs={class:"d-flex align-items-center me-8"},Rs=B(()=>s("span",{class:"material-symbols-outlined fs-6 me-4 lh-24"}," group ",-1)),Gs={key:0},Js={key:1},Ks={class:"fs-5 fw-bold"};function Xs(e,t,V,C,D,S){const m=r("router-link"),u=r("SwiperSlide"),p=r("swiper");return a(),$(p,{loop:!0,slidesPerView:1,spaceBetween:24,freeMode:!0,pagination:{clickable:!0},breakpoints:{576:{slidesPerView:1,spaceBetween:24},768:{slidesPerView:2,spaceBetween:24},992:{slidesPerView:2,spaceBetween:24},1400:{slidesPerView:3,spaceBetween:24}},class:"mySwiper"},{default:_(()=>[(a(!0),c(M,null,O(this.suggestCourses,o=>(a(),$(u,{key:o.data.courseId,class:"mb-32"},{default:_(()=>[d(m,{to:`/course/${o.data.courseId}`},{default:_(()=>[s("div",Ls,[s("div",Us,[o.data.courseImg?(a(),c("img",{key:0,class:"h-180px w-100 transition object-fit-cover",src:o.data.courseImg,alt:"課程圖片"},null,8,Ts)):(a(),c("img",js)),s("span",{onClick:W(n=>e.toggleCollection(o.data.courseId),["prevent"]),class:g(["material-icons-outlined position-absolute bottom-0 end-0 text-primary bookmark-icon",{"h-auto":this.collectionStatus(o.data.courseId)==="bookmark","h-0":this.collectionStatus(o.data.courseId)==="bookmark_border"}]),title:"加入 / 移除收藏"},i(this.collectionStatus(o.data.courseId)),11,Es)]),s("div",Ns,[s("h2",qs,i(o.data.name),1),s("h3",As,"by "+i(o.data.teacherName),1),s("ul",Os,[s("li",zs,[Fs,s("p",null,i(o.data.time)+" 分鐘",1)]),s("li",Ws,[Hs,s("p",null,i(o.data.location),1)]),s("li",Qs,[Rs,o.data.buyer.length===0?(a(),c("span",Gs,"0")):(a(),c("span",Js,i(o.data.buyer.length),1))])]),s("span",Ks,"NT "+i(o.data.price),1)])])]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})}const Ys=k(Ps,[["render",Xs],["__scopeId","data-v-e35414c0"]]);const Zs={data(){return{}},components:{EditCourseModal:Bs,ListPlaceholder:H,CommentSwiper:X,SuggestCourseSwiper:Ys},methods:{...b(E,["addToCart","getUid"]),...b(w,["getCourseDetails","getSuggestCourses"]),...b(y,["checkMemberObserver","addToCollection","toggleCollection","checkMemberObserver"])},computed:{...v(w,["courseDetails","courseViewDetails","AllCourseData","isLoading","suggestCourses"]),...v(E,["uid","cart"]),...v(y,["uid","collectionStatus","isMember"])},watch:{"$route.params.id":{handler(e){this.courseId=e,this.courseId&&this.getCourseDetails(this.courseId)}}},created(){this.checkMemberObserver(),this.courseId=this.$route.params.id,console.log("這是 courseId",this.courseId),this.getCourseDetails(this.courseId),this.getSuggestCourses()}},l=e=>(z("data-v-73b657bd"),e=e(),F(),e),se={key:1,class:"mt-66"},ee={class:"container py-32"},te={class:"d-flex align-items-end"},oe={"aria-label":"breadcrumb"},ae={class:"breadcrumb"},le={class:"breadcrumb-item"},ie={class:"breadcrumb-item"},de=l(()=>s("li",{class:"breadcrumb-item active","aria-current":"page"},"單一課程",-1)),ce={class:"row mb-16 mb-lg-32"},ne={class:"col-12 col-lg-8 mb-32 mb-lg-0"},re={class:"pe-xl-48"},ue=["src"],me={class:"col-12 col-lg-4 d-flex flex-column"},_e={class:"fs-2 fw-bold"},pe={class:"mt-16 text-grey-bold"},be={class:"material-icons-outlined"},he=l(()=>s("span",null,"收藏",-1)),fe={class:"row align-items-start"},ge={class:"col-12 col-lg-8"},ve={class:"row align-items-center mb-16"},we={class:"col-auto cursor-pointer"},$e=["src"],ye={key:1,class:"h-100px w-100px rounded-circle object-fit-cover",src:A,alt:"老師照片"},ke={class:"col-auto fs-2"},Ve={class:"row mb-32"},Ce={class:"col-12 col-lg-10"},De=l(()=>s("p",{class:"fs-4 mb-16 fw-bold"},"關於課程",-1)),Se={class:"row mb-16 g-16"},Ie={class:"col-auto"},xe={class:"d-flex align-items-center"},Me=l(()=>s("span",{class:"material-symbols-outlined fs-1 me-8"},"timer",-1)),Be=l(()=>s("p",{class:"text-grey-bold fs-7"},"課程時長",-1)),Pe={class:"fs-6 fw-bold"},Le={class:"col-auto"},Ue={class:"d-flex align-items-center"},Te=l(()=>s("span",{class:"material-symbols-outlined fs-1 me-8"},"group",-1)),je=l(()=>s("p",{class:"text-grey-bold fs-7"},"被購買數",-1)),Ee={class:"fs-6 fw-bold"},Ne={class:"col-auto"},qe={class:"d-flex align-items-center"},Ae=l(()=>s("span",{class:"material-symbols-outlined fs-1 me-8"},"map",-1)),Oe=l(()=>s("p",{class:"text-grey-bold fs-7"},"上課地點",-1)),ze={class:"fs-6 fw-bold"},Fe={class:"col-12 col-xl-auto"},We={class:"d-flex align-items-center"},He=l(()=>s("span",{class:"material-symbols-outlined fs-1 me-8"},"school",-1)),Qe=l(()=>s("p",{class:"text-grey-bold fs-7"},"上課方式",-1)),Re={class:"fs-6 bg-primary rounded px-2 fw-bold me-8"},Ge={key:0,class:"col-12 col-lg-4 position-sticky top-100px"},Je={class:"p-32 border rounded-4"},Ke=l(()=>s("h4",{class:"border-bottom pb-24 mb-24"},"購買單堂課程",-1)),Xe={class:"mb-16"},Ye=l(()=>s("span",{class:"fs-5 me-16"},"售價",-1)),Ze={class:"fs-1"},st={class:"d-flex justify-content-between"},et=l(()=>s("span",{class:"material-symbols-outlined fs-3 align-middle"},"shopping_cart",-1)),tt=[et],ot={key:1,class:"col-12 col-lg-4 p-32 position-sticky top-100px border rounded-4"},at=l(()=>s("h4",{class:"border-bottom pb-24 mb-24"},"購買人數",-1)),lt={class:"mb-16"},it=l(()=>s("span",{class:"fs-5 me-4"},"共 ",-1)),dt={class:"fs-1"},ct=l(()=>s("div",{class:"d-flex justify-content-between align-items-center"},[s("button",{type:"button",class:"btn btn-outline-primary w-25 rounded-pill","data-bs-toggle":"modal","data-bs-target":"#EditCourseModal"}," 編輯 "),s("span",{class:"text-primary fs-8"},"(課程審核通過後將無法再編輯)")],-1)),nt={class:"row mb-32 mt-32 mt-lg-0"},rt={class:"col-12 col-lg-8"},ut=l(()=>s("p",{class:"fs-4 mb-16 fw-bold"},"課程評價",-1)),mt={class:"row"},_t={class:"col-12 col-lg-8"},pt=l(()=>s("p",{class:"fs-4 mb-16 fw-bold"},"猜你喜歡",-1));function bt(e,t,V,C,D,S){var P,L,U,T;const m=r("ListPlaceholder"),u=r("router-link"),p=r("CommentSwiper"),o=r("SuggestCourseSwiper"),n=r("EditCourseModal");return a(),c(M,null,[e.isLoading?(a(),$(m,{key:0,class:"mt-66 py-32"})):f("",!0),e.isLoading?f("",!0):(a(),c("div",se,[s("section",null,[s("div",ee,[s("div",te,[s("nav",oe,[s("ol",ae,[s("li",le,[d(u,{to:"/"},{default:_(()=>[h("首頁")]),_:1})]),s("li",ie,[d(u,{to:"/courses"},{default:_(()=>[h("所有課程")]),_:1})]),de])])]),s("div",ce,[s("div",ne,[s("div",re,[s("img",{class:"h-lg-500 w-100 rounded-4",src:(P=e.courseViewDetails.data)==null?void 0:P.courseImg,alt:"課程圖片"},null,8,ue)])]),s("div",me,[s("h1",_e,i(e.courseViewDetails.data.name),1),s("p",pe,i(e.courseViewDetails.data.courseIntro),1),s("button",{type:"button",onClick:t[0]||(t[0]=W(I=>e.toggleCollection(e.courseViewDetails.data.courseId),["prevent"])),class:"btn btn-outline-primary px-16 py-8 mt-auto ms-auto rounded-pill d-flex align-items-center",title:"加入 / 移除收藏"},[s("span",be,i(this.collectionStatus(e.courseViewDetails.data.courseId)),1),he])])]),s("div",fe,[s("div",ge,[s("div",ve,[s("div",we,[e.courseViewDetails.teacherImg?(a(),c("img",{key:0,class:"h-100px w-100px rounded-circle object-fit-cover",src:e.courseViewDetails.teacherImg,alt:"老師照片"},null,8,$e)):(a(),c("img",ye))]),s("div",ke,i(e.courseViewDetails.teacherName),1)]),s("div",Ve,[s("div",Ce,i(e.courseViewDetails.teacherIntro),1)]),De,s("div",Se,[s("div",Ie,[s("div",xe,[Me,s("div",null,[Be,s("p",Pe,i(e.courseViewDetails.data.time)+"分鐘",1)])])]),s("div",Le,[s("div",Ue,[Te,s("div",null,[je,s("p",Ee,i((L=e.courseViewDetails.data.buyer)==null?void 0:L.length)+"次",1)])])]),s("div",Ne,[s("div",qe,[Ae,s("div",null,[Oe,s("p",ze,i(e.courseViewDetails.data.location),1)])])]),s("div",Fe,[s("div",We,[He,s("div",null,[Qe,s("p",Re,i((U=e.courseViewDetails.data.classMode)==null?void 0:U[0]),1)])])])])]),e.courseViewDetails.teacherUid!==e.uid?(a(),c("div",Ge,[s("div",Je,[Ke,s("div",Xe,[Ye,s("span",Ze,"NT$ "+i(e.courseViewDetails.data.price),1)]),s("div",st,[e.isMember?(a(),$(u,{key:0,to:"/cart",onClick:t[1]||(t[1]=I=>e.addToCart(e.courseViewDetails.data.courseId)),type:"button",class:"btn btn-outline-primary w-75 rounded-pill"},{default:_(()=>[h("立即購買")]),_:1})):f("",!0),e.isMember?f("",!0):(a(),c("button",{key:1,onClick:t[2]||(t[2]=I=>e.addToCart(e.courseViewDetails.data.courseId)),type:"button",class:"btn btn-outline-primary w-75 rounded-pill"},"立即購買")),s("button",{onClick:t[3]||(t[3]=I=>e.addToCart(e.courseViewDetails.data.courseId)),type:"button",class:"btn btn btn-primary rounded-pill"},tt)])])])):f("",!0),e.courseViewDetails.teacherUid===e.uid?(a(),c("div",ot,[at,s("div",lt,[it,s("span",dt,i((T=e.courseViewDetails.data.buyer)==null?void 0:T.length)+" 人",1)]),ct])):f("",!0)]),s("div",nt,[s("div",rt,[ut,d(p)])]),s("div",mt,[s("div",_t,[pt,d(o)])])])])])),d(n)],64)}const Mt=k(Zs,[["render",bt],["__scopeId","data-v-73b657bd"]]);export{Mt as default};
