import{a as g,m as w,b as U}from"./pinia-ef994b1a.js";import{u as B}from"./userStore-2f73dc30.js";import{c as y}from"./coursesStore-e5bb01de.js";import{c as P}from"./cartStore-8c32fc92.js";import{L as O}from"./ListPlaceholder-6606d71c.js";import{S as z,a as F}from"./free-mode.min-5e8e3a80.js";import{_ as N}from"./default-user-photo-5f1f51b0.js";import{bf as D,aC as m,aq as a,n as d,v as c,ba as p,F as k,aA as q,au as j,ar as A,o as s,aa as f,bc as W,u as h,l as T,m as b,aQ as i}from"./_plugin-vue_export-helper-ec969899.js";import{t as $}from"./teacherStore-147c7f7b.js";import{l as H,n as E}from"./runtime-dom.esm-bundler-e62d4d3a.js";import"./index.esm2017-880666f6.js";import"./index.browser.esm2017-ac27ce2e.js";import"./_commonjsHelpers-87174ba5.js";import"./update-swiper-3bad1b5e.js";const Q={components:{Swiper:z,SwiperSlide:F},setup(){return{}},computed:{},methods:{},created(){}},R=e=>(j("data-v-0f5edc72"),e=e(),A(),e),G={class:"container"},J=R(()=>s("div",{class:"card rounded-3 shadow-sm"},[s("div",{class:"card-body"},[s("div",{class:"d-flex align-items-center"},[s("div",{class:"me-8"},[s("img",{src:N,alt:"預設用戶照片",class:"user-photo"})]),s("div",{class:""},[s("div",null,[s("span",{class:"fw-bold me-8"},"王小明"),s("span",null,"2023-08-09")]),s("div",{class:"text-warning"},[s("i",{class:"bi bi-star-fill me-4"}),s("i",{class:"bi bi-star-fill me-4"}),s("i",{class:"bi bi-star-fill me-4"}),s("i",{class:"bi bi-star-fill me-4"}),s("i",{class:"bi bi-star-fill me-4"})])])]),s("div",null,[s("p",{class:"fw-bold my-2"},"推薦給所有想學音樂的同學"),s("p",null," 這個音樂家教課程真是太棒了！老師不僅專業且充滿耐心，每次上課都讓我深刻理解音樂的精髓。透過個人指導，我不僅學會了演奏技巧，還能自信地創作自己的音樂作品。感謝老師用心的教學，讓我愛上了音樂，這是一段美妙的學習旅程！ ")])])],-1));function K(e,t,V,C,I,S){const u=m("SwiperSlide"),r=m("swiper");return a(),d("div",G,[c(r,{loop:!0,slidesPerView:1,spaceBetween:20,freeMode:!0,pagination:{clickable:!0},navigation:"",breakpoints:{576:{slidesPerView:1,spaceBetween:26},768:{slidesPerView:2,spaceBetween:26},992:{slidesPerView:2,spaceBetween:26},1400:{slidesPerView:3,spaceBetween:26}},class:"mySwiper px-24"},{default:p(()=>[(a(),d(k,null,q(5,v=>c(u,{key:v,class:"mb-32"},{default:p(()=>[J]),_:2},1024)),64))]),_:1})])}const X=D(Q,[["render",K],["__scopeId","data-v-0f5edc72"]]),Y={methods:{...g($,["updateImg","beforeUpdate","imgHandle"]),...g(y,["updateCourseData"])},computed:{...w($,["teacherData.courseImg"]),...U($,["teacherData"]),...U(y,["courseDetails"])}},Z={id:"EditCourseModal",ref:"EditCourseModal",class:"modal fade",tabindex:"-1","aria-labelledby":"EditCourseModalLabel","aria-hidden":"true"},ss={class:"modal-dialog"},es={class:"modal-content border-0"},ts=s("div",{class:"modal-header bg-dark text-white"},[s("h4",null,"編輯課程資料")],-1),os={class:"modal-body"},as={class:"row mb-4"},ls=s("div",{class:"col-auto"},[s("label",{for:"name",class:"col-form-label px-4"},[s("span",{class:"text-danger"},"*"),h("課程名稱")])],-1),is={class:"col-8 col-lg-6"},ds={class:"row mb-4"},cs=s("div",{class:"col-auto"},[s("label",{for:"price",class:"col-form-label px-4"},[s("span",{class:"text-danger"},"*"),h("課程費用")])],-1),ns={class:"col-8 col-lg-6"},rs={class:"row mb-4"},ms=s("div",{class:"col-auto"},[s("label",{for:"type",class:"col-form-label px-4"},[s("span",{class:"text-danger"},"*"),h("教學項目")])],-1),us={class:"col-8 col-lg-6"},_s=s("option",{value:"",selected:"",disabled:""},"請選擇教學項目",-1),ps=s("option",{value:"電吉他"},"電吉他",-1),hs=s("option",{value:"電貝斯"},"電貝斯",-1),bs=s("option",{value:"爵士鼓"},"爵士鼓",-1),fs={class:"row mb-4"},vs=s("div",{class:"col-auto"},[s("label",{for:"time",class:"col-form-label px-4"},[s("span",{class:"text-danger"},"*"),h("授課時間")])],-1),gs={class:"col-8 col-lg-6"},ws={class:"mb-3"},ys=s("label",{for:"intro",class:"form-label"},"課程介紹",-1),$s={class:"row"},ks=s("div",{class:"col-6"},[s("label",{for:"courseImg",class:"form-label",accept:"image/png ,image/jpg"},"上傳一張課程封面照")],-1),Ds={class:"col-6"},Vs={class:"text-center mb-16"},Cs=["src"],Is=["src"],Ss=s("div",{class:"text-end"},[s("button",{type:"button",class:"btn btn-outline-secondary rounded-4 me-4","data-bs-dismiss":"modal"}," 取消 "),s("button",{type:"submit",class:"btn btn-primary rounded-4","data-bs-dismiss":"modal"}," 確認 ")],-1),xs=s("div",{class:"modal-footer"},null,-1);function Ms(e,t,V,C,I,S){const u=m("v-field"),r=m("error-message"),v=m("v-form");return a(),d("div",Z,[s("div",ss,[s("div",es,[ts,s("div",os,[c(v,{ref:"form",class:"border border-text-dark p-6 fw-bold",onSubmit:t[6]||(t[6]=_=>e.updateCourseData(e.courseDetails.data.courseId))},{default:p(({errors:_})=>[s("div",as,[ls,s("div",is,[c(u,{id:"name",name:"課程名稱",type:"text",class:f(["form-control",{"is-invalid":_.課程名稱}]),placeholder:"請輸入課程名稱",rules:"required|min:3|max:20",modelValue:e.courseDetails.data.name,"onUpdate:modelValue":t[0]||(t[0]=n=>e.courseDetails.data.name=n)},null,8,["class","modelValue"]),c(r,{name:"課程名稱",class:"invalid-feedback"})])]),s("div",ds,[cs,s("div",ns,[c(u,{id:"price",name:"課程費用",type:"number",class:f(["form-control",{"is-invalid":_.課程費用}]),placeholder:"請輸入課程費用",rules:"required|min_value:100|max_value:100000",modelValue:e.courseDetails.data.price,"onUpdate:modelValue":t[1]||(t[1]=n=>e.courseDetails.data.price=n)},null,8,["class","modelValue"]),c(r,{name:"課程費用",class:"invalid-feedback"})])]),s("div",rs,[ms,s("div",us,[c(u,{id:"type",name:"教學項目",as:"select",class:f(["form-select",{"is-invalid":_.教學項目}]),rules:"required",modelValue:e.courseDetails.data.type,"onUpdate:modelValue":t[2]||(t[2]=n=>e.courseDetails.data.type=n)},{default:p(()=>[_s,ps,hs,bs]),_:2},1032,["class","modelValue"]),c(r,{name:"教學項目",class:"invalid-feedback"})])]),s("div",fs,[vs,s("div",gs,[c(u,{id:"time",name:"授課時間",type:"number",class:f(["form-control",{"is-invalid":_.授課時間}]),placeholder:"請輸入授課時間(分)",rules:"required|min_value:30|max_value:600",modelValue:e.courseDetails.data.time,"onUpdate:modelValue":t[3]||(t[3]=n=>e.courseDetails.data.time=n)},null,8,["class","modelValue"]),c(r,{name:"授課時間",class:"invalid-feedback"})])]),s("div",ws,[ys,W(s("textarea",{id:"intro",class:f(["form-control",{"is-invalid":_.課程介紹}]),placeholder:"請輸入課程介紹，限定300字",rules:"required|max:300",cols:"30",rows:"10","onUpdate:modelValue":t[4]||(t[4]=n=>e.courseDetails.data.courseIntro=n)},`<error-message\r
              name="課程介紹"\r
              class="invalid-feedback"\r
            ></error-message>\r
            `,2),[[H,e.courseDetails.data.courseIntro]])]),s("div",$s,[ks,s("div",Ds,[s("input",{class:"form-control",type:"file",id:"courseImg",onChange:t[5]||(t[5]=n=>e.updateImg("course",n))},null,32)])]),s("div",Vs,[e.teacherData.courseImg!==""?(a(),d("img",{key:0,class:"img-fluid",src:e.teacherData.courseImg,alt:"課程照片"},null,8,Cs)):(a(),d("img",{key:1,class:"img-fluid",src:e.courseDetails.data.courseImg,alt:"課程照片"},null,8,Is))]),Ss]),_:1},512)]),xs])])],512)}const Ls=D(Y,[["render",Ms]]);const Us={data(){return{}},components:{EditCourseModal:Ls,ListPlaceholder:O,CommentSwiper:X},methods:{...g(P,["addToCart","getUid"]),...g(y,["getCourseDetails","getSuggestCourses"]),...g(B,["checkMemberObserver","addToCollection","toggleCollection","checkMemberObserver"])},computed:{...w(y,["courseDetails","courseViewDetails","AllCourseData","isLoading","suggestCourses"]),...w(P,["uid","cart"]),...w(B,["uid","collectionStatus","isMember"])},watch:{"$route.params.id":{handler(e){this.courseId=e,this.courseId&&this.getCourseDetails(this.courseId)}}},created(){this.checkMemberObserver(),this.courseId=this.$route.params.id,console.log("這是 courseId",this.courseId),this.getCourseDetails(this.courseId),this.getSuggestCourses()}},o=e=>(j("data-v-5f7e0e9c"),e=e(),A(),e),Bs={key:1,class:"mt-66"},Ps={class:"container py-32"},Ts={class:"d-flex align-items-end"},Es={"aria-label":"breadcrumb"},Ns={class:"breadcrumb"},qs={class:"breadcrumb-item"},js={class:"breadcrumb-item"},As=o(()=>s("li",{class:"breadcrumb-item active","aria-current":"page"},"單一課程",-1)),Os={class:"row mb-16 mb-lg-32"},zs={class:"col-12 col-lg-8 mb-32 mb-lg-0"},Fs={class:"pe-xl-48"},Ws=["src"],Hs={class:"col-12 col-lg-4 d-flex flex-column"},Qs={class:"fs-2 fw-bold"},Rs={class:"mt-16 text-grey-bold"},Gs={class:"material-icons-outlined"},Js=o(()=>s("span",null,"收藏",-1)),Ks={class:"row align-items-start"},Xs={class:"col-12 col-lg-8"},Ys={class:"row align-items-center mb-16"},Zs={class:"col-auto cursor-pointer"},se=["src"],ee={key:1,class:"h-100px w-100px rounded-circle object-fit-cover",src:N,alt:"老師照片"},te={class:"col-auto fs-2"},oe={class:"row mb-32"},ae={class:"col-12 col-lg-10"},le=o(()=>s("p",{class:"fs-4 mb-16 fw-bold"},"關於課程",-1)),ie={class:"row mb-16 g-16"},de={class:"col-auto"},ce={class:"d-flex align-items-center"},ne=o(()=>s("span",{class:"material-symbols-outlined fs-1 me-8"},"timer",-1)),re=o(()=>s("p",{class:"text-grey-bold fs-7"},"課程時長",-1)),me={class:"fs-6 fw-bold"},ue={class:"col-auto"},_e={class:"d-flex align-items-center"},pe=o(()=>s("span",{class:"material-symbols-outlined fs-1 me-8"},"group",-1)),he=o(()=>s("p",{class:"text-grey-bold fs-7"},"被購買數",-1)),be={class:"fs-6 fw-bold"},fe={class:"col-auto"},ve={class:"d-flex align-items-center"},ge=o(()=>s("span",{class:"material-symbols-outlined fs-1 me-8"},"map",-1)),we=o(()=>s("p",{class:"text-grey-bold fs-7"},"上課地點",-1)),ye={class:"fs-6 fw-bold"},$e={class:"col-12 col-xl-auto"},ke={class:"d-flex align-items-center"},De=o(()=>s("span",{class:"material-symbols-outlined fs-1 me-8"},"school",-1)),Ve=o(()=>s("p",{class:"text-grey-bold fs-7"},"上課方式",-1)),Ce={class:"fs-6 bg-primary rounded px-2 fw-bold me-8"},Ie={key:0,class:"col-12 col-lg-4 position-sticky top-100px"},Se={class:"p-32 border rounded-4"},xe=o(()=>s("h4",{class:"border-bottom pb-24 mb-24"},"購買單堂課程",-1)),Me={class:"mb-16"},Le=o(()=>s("span",{class:"fs-5 me-16"},"售價",-1)),Ue={class:"fs-1"},Be={class:"d-flex justify-content-between"},Pe=o(()=>s("span",{class:"material-symbols-outlined fs-3 align-middle"},"shopping_cart",-1)),Te=[Pe],Ee={key:1,class:"col-12 col-lg-4 p-32 position-sticky top-100px border rounded-4"},Ne=o(()=>s("h4",{class:"border-bottom pb-24 mb-24"},"購買人數",-1)),qe={class:"mb-16"},je=o(()=>s("span",{class:"fs-5 me-4"},"共 ",-1)),Ae={class:"fs-1"},Oe=o(()=>s("div",{class:"d-flex justify-content-between align-items-center"},[s("button",{type:"button",class:"btn btn-outline-primary w-25 rounded-pill","data-bs-toggle":"modal","data-bs-target":"#EditCourseModal"}," 編輯 "),s("span",{class:"text-primary fs-8"},"(課程審核通過後將無法再編輯)")],-1)),ze={class:"row mb-32 mt-32 mt-lg-0"},Fe={class:"col-12 col-lg-8"},We=o(()=>s("p",{class:"fs-4 mb-16 fw-bold"},"課程評價",-1)),He={class:"row mb-32"},Qe={class:"col-12 col-lg-8"},Re=o(()=>s("p",{class:"fs-4 mb-16 fw-bold"},"猜你喜歡",-1)),Ge={class:"row row-cols-lg-1 row-cols-lg-3"},Je={class:"card course-card rounded-4 shadow h-100"},Ke={class:"position-relative overflow-hidden rounded-top-4"},Xe=["src"],Ye={key:1,class:"h-180px w-100 transition",src:"https://www.ils.com.tw/zh/Up_files/webskin/RWD/include/images/type3album_blank.png",alt:"課程預設圖片"},Ze=["onClick"],st={class:"card-body d-flex flex-column"},et={class:"fs-5 fw-bold d-flex mb-4"},tt={class:"fs-6 text-secondary mb-20"},ot={class:"d-flex text-secondary mb-auto"},at={class:"d-flex align-items-center me-8 position-relative course-card-title"},lt=o(()=>s("span",{class:"material-symbols-outlined fs-6 me-4 lh-24"}," timer ",-1)),it={class:"d-flex align-items-center me-8"},dt=o(()=>s("span",{class:"material-symbols-outlined fs-6 me-4 lh-24"}," map ",-1)),ct={class:"d-flex align-items-center me-8"},nt=o(()=>s("span",{class:"material-symbols-outlined fs-6 me-4 lh-24"}," group ",-1)),rt={key:0},mt={key:1},ut={class:"fs-5 fw-bold"};function _t(e,t,V,C,I,S){var n,x,M,L;const u=m("ListPlaceholder"),r=m("router-link"),v=m("CommentSwiper"),_=m("EditCourseModal");return a(),d(k,null,[e.isLoading?(a(),T(u,{key:0,class:"mt-66 py-32"})):b("",!0),e.isLoading?b("",!0):(a(),d("div",Bs,[s("section",null,[s("div",Ps,[s("div",Ts,[s("nav",Es,[s("ol",Ns,[s("li",qs,[c(r,{to:"/"},{default:p(()=>[h("首頁")]),_:1})]),s("li",js,[c(r,{to:"/courses"},{default:p(()=>[h("所有課程")]),_:1})]),As])])]),s("div",Os,[s("div",zs,[s("div",Fs,[s("img",{class:"h-lg-500 w-100 rounded-4",src:(n=e.courseViewDetails.data)==null?void 0:n.courseImg,alt:"課程圖片"},null,8,Ws)])]),s("div",Hs,[s("h1",Qs,i(e.courseViewDetails.data.name),1),s("p",Rs,i(e.courseViewDetails.data.courseIntro),1),s("button",{type:"button",onClick:t[0]||(t[0]=E(l=>e.toggleCollection(e.courseViewDetails.data.courseId),["prevent"])),class:"btn btn-outline-primary px-16 py-8 mt-auto ms-auto rounded-pill d-flex align-items-center",title:"加入 / 移除收藏"},[s("span",Gs,i(this.collectionStatus(e.courseViewDetails.data.courseId)),1),Js])])]),s("div",Ks,[s("div",Xs,[s("div",Ys,[s("div",Zs,[e.courseViewDetails.teacherImg?(a(),d("img",{key:0,class:"h-100px w-100px rounded-circle object-fit-cover",src:e.courseViewDetails.teacherImg,alt:"老師照片"},null,8,se)):(a(),d("img",ee))]),s("div",te,i(e.courseViewDetails.teacherName),1)]),s("div",oe,[s("div",ae,i(e.courseViewDetails.teacherIntro),1)]),le,s("div",ie,[s("div",de,[s("div",ce,[ne,s("div",null,[re,s("p",me,i(e.courseViewDetails.data.time)+"分鐘",1)])])]),s("div",ue,[s("div",_e,[pe,s("div",null,[he,s("p",be,i((x=e.courseViewDetails.data.buyer)==null?void 0:x.length)+"次",1)])])]),s("div",fe,[s("div",ve,[ge,s("div",null,[we,s("p",ye,i(e.courseViewDetails.data.location),1)])])]),s("div",$e,[s("div",ke,[De,s("div",null,[Ve,s("p",Ce,i((M=e.courseViewDetails.data.classMode)==null?void 0:M[0]),1)])])])])]),e.courseViewDetails.teacherUid!==e.uid?(a(),d("div",Ie,[s("div",Se,[xe,s("div",Me,[Le,s("span",Ue,"NT$ "+i(e.courseViewDetails.data.price),1)]),s("div",Be,[e.isMember?(a(),T(r,{key:0,to:"/cart",onClick:t[1]||(t[1]=l=>e.addToCart(e.courseViewDetails.data.courseId)),type:"button",class:"btn btn-outline-primary w-75 rounded-pill"},{default:p(()=>[h("立即購買")]),_:1})):b("",!0),e.isMember?b("",!0):(a(),d("button",{key:1,onClick:t[2]||(t[2]=l=>e.addToCart(e.courseViewDetails.data.courseId)),type:"button",class:"btn btn-outline-primary w-75 rounded-pill"},"立即購買")),s("button",{onClick:t[3]||(t[3]=l=>e.addToCart(e.courseViewDetails.data.courseId)),type:"button",class:"btn btn btn-primary rounded-pill"},Te)])])])):b("",!0),e.courseViewDetails.teacherUid===e.uid?(a(),d("div",Ee,[Ne,s("div",qe,[je,s("span",Ae,i((L=e.courseViewDetails.data.buyer)==null?void 0:L.length)+" 人",1)]),Oe])):b("",!0)]),s("div",ze,[s("div",Fe,[We,c(v)])]),s("div",He,[s("div",Qe,[Re,s("div",Ge,[(a(!0),d(k,null,q(this.suggestCourses,l=>(a(),d("div",{key:l.data.courseId,class:"col"},[c(r,{to:`/course/${l.data.courseId}`},{default:p(()=>[s("div",Je,[s("div",Ke,[l.data.courseImg?(a(),d("img",{key:0,class:"h-180px w-100 transition",src:l.data.courseImg,alt:"課程圖片"},null,8,Xe)):(a(),d("img",Ye)),s("span",{onClick:E(pt=>e.toggleCollection(l.data.courseId),["prevent"]),class:f(["material-icons-outlined position-absolute bottom-0 end-0 text-primary bookmark-icon",{"h-auto":this.collectionStatus(l.data.courseId)==="bookmark","h-0":this.collectionStatus(l.data.courseId)==="bookmark_border"}]),title:"加入 / 移除收藏"},i(this.collectionStatus(l.data.courseId)),11,Ze)]),s("div",st,[s("h2",et,i(l.data.name),1),s("h3",tt,"by "+i(l.data.teacherName),1),s("ul",ot,[s("li",at,[lt,s("p",null,i(l.data.time)+" 分鐘",1)]),s("li",it,[dt,s("p",null,i(l.data.location),1)]),s("li",ct,[nt,l.data.buyer.length===0?(a(),d("span",rt,"0")):(a(),d("span",mt,i(l.data.buyer.length),1))])]),s("span",ut,"NT "+i(l.data.price),1)])])]),_:2},1032,["to"])]))),128))])])])])])])),c(_)],64)}const xt=D(Us,[["render",_t],["__scopeId","data-v-5f7e0e9c"]]);export{xt as default};
