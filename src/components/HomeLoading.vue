<template>
  <div class="home-loading position-fixed" v-if="homeLoading">
    <svg version="1.1" id="lion-dashed" xmlns="http://www.w3.org/2000/svg" class="animal-svg animal-svg--dashed" xmlns:xlink="http://www.w3.org/1999/xlink"
        x="0px" y="0px" viewBox="-150 -50 1920 1080" style="enable-background:new 0 0 1920 1080;" xml:space="preserve"
        >
      <g>
        <g>
          <path id="lion--dashed--path" class="st0"
          :class="{'draw-animation' : true}"
          d="M664.64,587.46c-10,7.78-18.67,11.67-26.01,11.67c-4.89,0-16.67-2.81-35.34-8.43
          c-7.78-2.38-14.78-3.57-21-3.57h-6.67c8.67-13.34,15.22-30.56,19.67-51.68c23.34,0,43.51-9.5,60.51-28.51
          c17-19,25.51-41.18,25.51-66.52c0-14.45-3.12-25.89-9.34-34.34c-6.23-8.44-14.78-12.67-25.67-12.67
          c-21.12,0-38.46,15.45-52.01,46.34c-6.45,14.67-13.23,38.46-20.34,71.35c-3.33-0.89-6.62-1.94-9.84-3.17
          c-3.23-1.22-8.84-3.5-16.84-6.83l-5-2.67l-5.33-2c-1.78,4-2.67,9-2.67,15c0,4.23,1.72,7.62,5.17,10.17
          c3.44,2.56,10.28,5.5,20.5,8.84l9.34,2.67c-4.45,18.52-7.83,31.52-10.17,38.99c-2.33,7.48-4.62,13.22-6.83,17.23
          c-13.56,1.79-23.23,4.02-29.01,6.69c-10,4.69-15,12.27-15,22.76c0,2.01,0.44,3.34,1.33,4.02c0.67,0.44,2.22,0.67,4.67,0.67
          c7.78,0,15.72-1.36,23.84-4.08c8.11-2.72,17.17-7.14,27.17-13.26c4.89,0.89,15.89,4.33,33.01,10.34c13.34,4.67,24.56,7,33.67,7
          c15.11,0,36.12-12,63.02-36.01v-28.34C682.31,572.02,672.2,581.46,664.64,587.46z M644.64,417.42c8.22,0,12.34,7.12,12.34,21.34
          c0,18.9-5,35.57-15,50.01c-10.89,15.56-24.34,23.34-40.34,23.34C614.07,448.99,628.41,417.42,644.64,417.42z" />
        </g>
        <g>
          <path id="lion--dashed--path" class="st0"
          :class="{'draw-animation' : true}"
          d="M747.66,602.46c-7.78,0-13.45-3.44-17-10.34c-2.45-4.67-3.67-10.78-3.67-18.34v-1.33l7-3
          c18.45-7.55,31.78-14.34,40.01-20.34c15.56-11.34,23.34-24.56,23.34-39.68c0-16.89-8.89-25.34-26.67-25.34
          c-18.89,0-35.57,9.39-50.01,28.17c-14.45,18.79-21.67,40.29-21.67,64.52c0,12.23,3.05,23.17,9.17,32.84
          c6.11,9.67,15.06,14.5,26.84,14.5c32.23,0,65.46-12.34,99.69-37.01v-28.01c-17.56,15.34-33.12,26.4-46.68,33.17
          C774.45,599.08,761,602.46,747.66,602.46z M745.66,518.61c7.55-9,15-13.5,22.34-13.5c5.11,0,7.67,2.45,7.67,7.34
          c0,6.67-4.12,13.39-12.34,20.17c-8.23,6.78-19.23,12.73-33.01,17.84C732.99,538.23,738.1,527.61,745.66,518.61z" />
        </g>
        <g>
          <path class="st0"
          :class="{'draw-animation' : true}"
          d="M916.7,589.13c-13.56,7.78-24.79,11.67-33.67,11.67c-10.45,0-15.67-8-15.67-24l1.67-20.34
          c15.11-18,27.12-33.23,36.01-45.68c12.45-17.11,21.78-32.34,28.01-45.68c7.33-15.56,11-29.67,11-42.34
          c0-8.44-2.22-15.5-6.67-21.17c-4.45-5.67-9.89-8.5-16.34-8.5c-8,0-16,3.89-24.01,11.67c-14.23,15.56-27.56,43.01-40.01,82.35
          c-11.56,36.68-17.34,66.57-17.34,89.69c0,13.34,2.33,24,7,32.01c5.55,9.78,14.34,14.67,26.34,14.67s24.22-2.72,36.68-8.17
          c12.45-5.44,27.22-14.72,44.34-27.84v-28.34C942.71,571.35,930.26,581.35,916.7,589.13z M890.36,464.1
          c10.89-32.01,20-48.01,27.34-48.01c4,0,6,3.78,6,11.34c0,8-2.06,16.73-6.17,26.17c-4.12,9.45-10.17,20.4-18.17,32.84
          c-4.67,7.33-13.23,19.79-25.67,37.34C877.03,507.11,882.58,487.22,890.36,464.1z" />
        </g>
        <g>
          <path id="lion--dashed--path" class="st0"
          :class="{'draw-animation' : true}"
          d="M1047.4,592.3c-13.56,6.78-27.01,10.17-40.34,10.17c-7.78,0-13.45-3.44-17-10.34
          c-2.45-4.67-3.67-10.78-3.67-18.34v-1.33l7-3c18.45-7.55,31.78-14.34,40.01-20.34c15.56-11.34,23.34-24.56,23.34-39.68
          c0-16.89-8.89-25.34-26.67-25.34c-18.9,0-35.57,9.39-50.01,28.17c-14.45,18.79-21.67,40.29-21.67,64.52
          c0,12.23,3.05,23.17,9.17,32.84c6.11,9.67,15.06,14.5,26.84,14.5c32.23,0,65.46-12.34,99.69-37.01v-28.01
          C1076.52,574.46,1060.96,585.52,1047.4,592.3z M1005.06,518.61c7.55-9,15-13.5,22.34-13.5c5.11,0,7.67,2.45,7.67,7.34
          c0,6.67-4.12,13.39-12.34,20.17c-8.23,6.78-19.23,12.73-33.01,17.84C992.39,538.23,997.5,527.61,1005.06,518.61z" stroke="#fff" stroke-miterlimit="10" fill="none" />
        </g>
      </g>

    </svg>
  </div>
</template>

<script>
import { mapWritableState } from 'pinia'
import windowStore from '@/stores/windowStore'
export default {
  computed: {
    ...mapWritableState(windowStore, ['homeLoading'])
  },
  methods: {
    scrollStop () {
      const mo = function (e) { e.preventDefault() }
      document.body.style.overflow = 'hidden'
      document.addEventListener('touchmove', mo, false)
    },
    scrollMove () {
      const mo = function (e) { e.preventDefault() }
      document.body.style.overflow = ''
      document.removeEventListener('touchmove', mo, false)
    }
  },
  mounted () {
    this.homeLoading = true
    this.scrollStop()
    setTimeout(() => {
      this.scrollMove()
      this.homeLoading = false
    }, 3500)
  }

}
</script>

<style lang="scss" scoped>
.home-loading {
  position: absolute;
  z-index: 50000;
  width: 100%;
  min-height: 100vh;
  background:  #F3F1E5;
}
.st0 {
  fill: none;
  stroke: #ff715f;
  stroke-width: 3;
  stroke-dasharray: 1000;
  stroke-dashoffset: 1000;
}

.draw-animation {
  animation: draw 3s ease-in-out forwards, fill 3s linear forwards;
}
@keyframes draw {
  to {
    stroke-dashoffset: 0;
  }
}
@keyframes fill {
  80% {
    fill: transparent;
  }
  100% {
    fill: #ff715f;
  }
}
.animal-svg {
  width: 100%;
  height: 100vh;
}
</style>
